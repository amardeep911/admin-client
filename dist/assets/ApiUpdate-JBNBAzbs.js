import{A as H,u as J,r as s,j as e,B as x,I as O,a as d}from"./index-DP5l2bTG.js";import{I as o}from"./Input-BHpDEKWe.js";import{L as c}from"./Label-BT8m33cQ.js";import{S as Q,a as W,b as X,c as Y,d as Z,f as ee,e as te}from"./Select-CIZ63-gD.js";import"./index-BoyYGgaP.js";import"./index-BeS4TZan.js";const re=()=>{var R;const g=J(),[m,h]=s.useState(""),[i,b]=s.useState(!1),[v,j]=s.useState(""),[y,w]=s.useState(""),[n,p]=s.useState("1"),[N,f]=s.useState([]),[T,M]=s.useState(""),[S,k]=s.useState(""),[B,P]=s.useState(""),[F,E]=s.useState(""),[K,U]=s.useState(""),[A,C]=s.useState("");s.useEffect(()=>{(async()=>{try{const a=(await d.get("/get-server")).data.filter(l=>!l.maintainance&&l.server!==0);f(a),a.length>0&&p("1"),a.length>0&&u("1")}catch(r){console.error("Failed to fetch servers:",r)}})()},[]);const u=async t=>{try{const a=(await d.get("/get-server")).data.find(l=>l.server===parseInt(t));a&&(P(a.exchangeRate||""),U(a.margin||""))}catch(r){console.error("Failed to fetch exchange rate and margin:",r)}},I=()=>g("/admin-panel"),L=t=>{p(t),h(""),t==="9"&&D(),u(t)},_=()=>{b(!i)},q=async t=>{t.preventDefault();try{await d.post("/add-server",{server:n,api_key:m});const a=(await d.get("/get-server")).data.filter(l=>!l.maintainance&&l.server!==0);f(a),a.length>0&&p("1"),h("")}catch(r){console.error("Error updating API:",r)}},V=async t=>{t.preventDefault();try{await d.post("/add-server",{server:v,api_key:y});const a=(await d.get("/get-server")).data.filter(l=>!l.maintainance&&l.server!==0);f(a),a.length>0&&p("1"),j(""),w(""),b(!1)}catch(r){console.error("Error adding server:",r)}},D=async()=>{try{const t=await d.get("/get-token-server9");M(t.data.token)}catch(t){console.error("Failed to fetch token for server 9:",t)}},G=async t=>{t.preventDefault();try{await d.post("/add-token-server9",{token:S}),k(""),D()}catch(r){console.error("Error updating token for server 9:",r)}},$=async t=>{t.preventDefault();try{await d.post("/add-exhange-rate-margin-server",{server:n,exchangeRate:F}),u(n),E("")}catch(r){console.error("Error updating exchange rate:",r)}},z=async t=>{t.preventDefault();try{await d.post("/add-exhange-rate-margin-server",{server:n,margin:A}),u(n),C("")}catch(r){console.error("Error updating margin:",r)}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full my-4 flex items-center justify-between",children:e.jsxs(x,{variant:"link",onClick:I,className:"text-sm font-normal text-[#8C8C8C] !no-underline p-1 h-0 flex gap-2",children:[e.jsx(O.arrowLeft,{className:"w-4 h-4"})," Update API"]})}),e.jsx("div",{className:"flex items-center justify-center pt-[1rem]",children:e.jsxs("div",{className:"bg-transparent w-full max-w-md rounded-lg mb-[60px] border-none dark",children:[e.jsx("div",{className:"flex justify-end",children:e.jsx(x,{variant:"link",onClick:_,className:"text-sm font-normal text-[#397CFF] !no-underline p-1 h-0",children:i?"- Back To Server":"+ Add New Server"})}),i?e.jsxs("form",{onSubmit:V,children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"serverNumber",className:"block text-base text-[#9d9d9d] font-normal py-2",children:"Server Number"}),e.jsx(o,{id:"serverNumber",type:"text",placeholder:"Enter server number",className:"w-full h-12 pl-3 rounded-lg text-[#9d9d9d] !placeholder-[#9d9d9d] bg-transparent border-[#e0effe] focus:border-none",value:v,onChange:t=>j(t.target.value)})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"apiKey",className:"block text-base text-[#9d9d9d] font-normal py-2",children:"API Key"}),e.jsx(o,{id:"apiKey",type:"text",placeholder:"Enter API Key",className:"w-full h-12 pl-3 rounded-lg text-[#9d9d9d] !placeholder-[#9d9d9d] bg-transparent border-[#e0effe] focus:border-none",value:y,onChange:t=>w(t.target.value)})]})]}),e.jsx("div",{className:"w-full flex items-center justify-center gap-4 mt-8",children:e.jsx(x,{className:"py-1 px-8 w-[50%] text-xs bg-[#129BFF] text-white hover:bg-[#129BFF]",children:"Save"})})]}):e.jsxs("form",{onSubmit:n==="9"?G:q,children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"block text-base text-[#9d9d9d] font-normal pt-3",children:"Select Server"}),e.jsx(ae,{selectedServer:n,onServerChange:L,servers:N}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"currentApi",className:"block text-base text-[#9d9d9d] font-normal py-3",children:"Current API"}),e.jsx(o,{id:"currentApi",type:"text",disabled:!0,className:"w-full h-12 pl-3 rounded-lg disabled:text-white disabled:!border-[#e0effe] focus:border-none disabled:opacity-100 disabled:bg-[#9D9D9D]/50",value:((R=N.find(t=>t.server===parseInt(n)))==null?void 0:R.api_key)||""})]}),n!=="9"&&e.jsxs("div",{children:[e.jsx(c,{htmlFor:"newApi",className:"block text-base text-[#9d9d9d] font-normal py-3",children:"Enter New API"}),e.jsx(o,{id:"newApi",type:"text",placeholder:"Enter new API Key",className:"w-full h-12 pl-3 rounded-lg text-[#9d9d9d] !placeholder-[#9d9d9d] bg-transparent border-[#e0effe] focus:border-none",value:m,onChange:t=>h(t.target.value)})]}),n==="9"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"currentToken",className:"block text-base text-[#9d9d9d] font-normal py-3",children:"Current Token"}),e.jsx(o,{id:"currentToken",type:"text",disabled:!0,className:"w-full h-12 pl-3 rounded-lg disabled:text-white disabled:!border-[#e0effe] focus:border-none disabled:opacity-100 disabled:bg-[#9D9D9D]/50",value:T||""})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"newToken",className:"block text-base text-[#9d9d9d] font-normal py-3",children:"Enter New Token"}),e.jsx(o,{id:"newToken",type:"text",placeholder:"Enter new token",className:"w-full h-12 pl-3 rounded-lg text-[#9d9d9d] !placeholder-[#9d9d9d] bg-transparent border-[#e0effe] focus",value:S,onChange:t=>k(t.target.value)})]})]})]}),e.jsxs("div",{className:"w-full flex items-center justify-center gap-4 mt-8",children:[e.jsx(x,{className:"py-1 px-8 text-xs bg-[#129BFF] text-white hover:bg-[#129BFF]",children:"Save"}),e.jsx(x,{className:"py-1 px-6 text-xs !rounded-md border-2 border-white font-normal hover:!bg-white hover:text-black transition-colors duration-200 ease-in-out",type:"button",onClick:I,children:"Cancel"})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Update Exchange Rate"}),e.jsxs("div",{className:"space-y-2 mt-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"currentExchangeRate",className:"block text-base text-[#9d9d9d] font-normal py-2",children:"Exchange Rate"}),e.jsx(o,{id:"currentExchangeRate",type:"text",value:B,disabled:!0,className:"w-full h-12 pl-3 rounded-lg disabled:text-white disabled:!border-[#e0effe] focus:border-none disabled:opacity-100 disabled:bg-[#9D9D9D]/50"})]}),e.jsxs("form",{onSubmit:$,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"newExchangeRate",className:"block text-base text-[#9d9d9d] font-normal py-2",children:"New Exchange Rate"}),e.jsx(o,{id:"newExchangeRate",type:"text",required:!0,placeholder:"Enter new exchange rate",className:"w-full h-12 pl-3 rounded-lg text-[#9d9d9d] bg-transparent border-[#e0effe] focus:border-none",value:F,onChange:t=>E(t.target.value)})]}),e.jsx("div",{className:"w-full flex items-center justify-center gap-4 mt-8",children:e.jsx(x,{className:"py-1 px-8 w-[50%] text-xs bg-[#129BFF] text-white hover:bg-[#129BFF]",children:"Update Exchange Rate"})})]})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Update Margin"}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"currentMargin",className:"block text-base text-[#9d9d9d] font-normal py-2",children:"Margin"}),e.jsx(o,{id:"currentMargin",type:"text",value:K,disabled:!0,className:"w-full h-12 pl-3 rounded-lg disabled:text-white disabled:!border-[#e0effe] focus:border-none disabled:opacity-100 disabled:bg-[#9D9D9D]/50"})]}),e.jsxs("form",{onSubmit:z,className:"mt-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"newMargin",className:"block text-base text-[#9d9d9d] font-normal py-2",children:"New Margin"}),e.jsx(o,{id:"newMargin",required:!0,type:"text",placeholder:"Enter new margin",className:"w-full h-12 pl-3 rounded-lg text-[#9d9d9d] bg-transparent border-[#e0effe] focus:border-none",value:A,onChange:t=>C(t.target.value)})]}),e.jsx("div",{className:"w-full flex items-center justify-center gap-4 mt-8",children:e.jsx(x,{className:"py-1 px-8 w-[50%] text-xs bg-[#129BFF] text-white hover:bg-[#129BFF]",children:"Update Margin"})})]})]})]})})]})},ae=({selectedServer:g,onServerChange:m,servers:h})=>e.jsxs(Q,{onValueChange:m,value:g,children:[e.jsx(W,{className:"w-full dark bg-[#282828]",children:e.jsx(X,{placeholder:"Select Server"})}),e.jsx(Y,{className:"dark bg-[#1e1e1e]",children:e.jsxs(Z,{children:[e.jsx(ee,{className:"text-[#9d9d9d]",children:"Select Available Server"}),h.map(i=>e.jsxs(te,{value:i.server.toString(),className:"text-[#9d9d9d]",children:["Server ",i.server]},i.server))]})})]}),ie=H()(re);export{ie as default};
