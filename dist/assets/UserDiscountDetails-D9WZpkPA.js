import{A as N,e as C,u as B,r as c,d as g,j as e,B as l,I as m,a as x}from"./index-DP5l2bTG.js";const w=()=>{const n=C().id,d=B(),[i,u]=c.useState(""),[h,o]=c.useState([]),{setEmail:f}=g();c.useEffect(()=>{(async()=>{try{const s=await(await x.get(`/users/get-discount?userId=${n}`)).data;s.length>0&&(u(s[0].userId.email),o(s))}catch(t){console.error("Failed to fetch user discounts:",t)}})()},[n]);const j=async(r,t)=>{try{await x.delete(`/users/delete-discount?userId=${n}&service=${r}&server=${t}`),o(s=>s.filter(a=>a.service!==r||a.server!==t))}catch(s){console.error("Failed to delete discount:",s)}},p=()=>d("/discount/user"),b=()=>{f(i),d("/discount/user/add-discount")};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full my-4 flex items-center justify-between",children:e.jsxs(l,{variant:"link",onClick:p,className:"text-sm font-normal text-[#8C8C8C] !no-underline p-1 h-0 flex gap-2",children:[e.jsx(m.arrowLeft,{className:"w-4 h-4"})," User Discount"]})}),e.jsx("div",{className:"flex items-center justify-center pt-[1rem]",children:e.jsx("div",{className:"bg-transparent w-full max-w-md rounded-lg mb-[60px] border-none dark",children:e.jsxs("div",{className:"bg-[#484848] py-4 px-6 flex mb-4 w-full flex-col gap-4 items-center justify-between rounded-lg my-4",children:[e.jsxs("div",{className:"border-b border-[#ADADAD] flex items-center justify-between w-full px-4",children:[e.jsx("h3",{className:"font-medium text-sm tmd:ext-base pr-8",children:"Email"}),e.jsx("p",{className:"font-normal text-base text-[#9B9B9B]",children:i})]}),e.jsx("div",{className:"bg-[#1F1F1F] rounded-lg",children:e.jsxs("table",{className:"w-[20rem] table-auto text-center",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 font-normal text-[#8C8C8C]",children:"Service"}),e.jsx("th",{className:"p-3 font-normal text-[#8C8C8C]",children:"Server"}),e.jsx("th",{className:"p-3 font-normal text-[#8C8C8C]",children:"Margin"}),e.jsx("th",{className:"p-3 font-normal text-[#8C8C8C]",children:"Action"})]})}),e.jsx("tbody",{children:h.map(({_id:r,service:t,discount:s,server:a})=>e.jsxs("tr",{children:[e.jsx("td",{className:"border-t-2 border-[#4B4B4B] p-3",children:t}),e.jsx("td",{className:"border-t-2 border-[#4B4B4B] p-3",children:a}),e.jsx("td",{className:"border-t-2 border-[#4B4B4B] p-3",children:s}),e.jsx("td",{className:"border-t-2 border-[#4B4B4B] p-3",children:e.jsx(l,{onClick:()=>j(t,a),children:e.jsx(m.trash,{className:"w-4 h-4 text-red-600"})})})]},r))})]})}),e.jsx("div",{className:"flex w-full items-center justify-end",children:e.jsx(l,{variant:"link",className:"text-sm font-normal text-[#397CFF] !no-underline p-1 h-0",onClick:b,children:"+ Add Discount"})})]})})})]})},D=N()(w);export{D as default};
