import{A as S,u as I,e as U,r as c,j as e,B as b,I as p,a as n,_ as E}from"./index-DP5l2bTG.js";import{I as F}from"./Input-BHpDEKWe.js";import{S as A}from"./Switch-DmbYghAb.js";import{h as P}from"./moment-C5S46NFB.js";import"./index-BeS4TZan.js";import"./index-BoyYGgaP.js";const T=()=>{const g=I(),{id:o}=U(),[r,u]=c.useState({}),[d,j]=c.useState(!1),[f,i]=c.useState(!1),[x,m]=c.useState(""),w=()=>g("/users-data"),N=async()=>{try{const s=await n.get(`/get-user?userId=${o}`);u(s.data),j(s.data.blocked),m(s.data.balance)}catch{console.error("Failed to fetch user data")}};c.useEffect(()=>{N()},[o]);const k=async()=>{try{(await n.post("/user",{userId:o,blocked:!d})).data.status==="SUCCESS"&&j(!d)}catch(s){console.error("Failed to update block status:",s)}},v=()=>{m(r.balance),i(!0)},D=s=>{m(s.target.value)},C=async()=>{try{(await n.post("/edit-balance",{userId:o,new_balance:parseFloat(x)})).status===200&&(u(a=>({...a,balance:x})),i(!1))}catch(s){console.error("Failed to update balance:",s)}},B=async()=>{const s=new Promise((a,y)=>{(async()=>{try{const l=await n.delete(`/block-fraud-clear?userId=${o}`);l.status===200&&N(),a(l)}catch(l){y(l)}})()});await E.promise(s,{loading:"Deleting Data...",success:a=>a.data.message,error:a=>{var h,l;return((l=(h=a.response)==null?void 0:h.data)==null?void 0:l.error)||"Error Deleting data. Please try again."}})},t={wordBreak:"break-word",whiteSpace:"normal",overflowWrap:"break-word"};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full my-4 flex items-center justify-between",children:e.jsxs(b,{variant:"link",onClick:w,className:"text-sm font-normal text-[#8C8C8C] !no-underline p-1 h-0 flex gap-2",children:[e.jsx(p.arrowLeft,{className:"w-4 h-4"})," User Data Details"]})}),e.jsx("div",{className:"flex items-center justify-center pt-[1rem]",children:e.jsxs("div",{className:"bg-transparent w-full max-w-md rounded-lg mb-[60px] border-none dark",children:[e.jsxs("div",{className:"w-full flex items-center justify-between px-4",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center gap-1",children:[e.jsx("h5",{className:"font-normal text-[#757575]",children:"Block on/off"}),e.jsx(A,{checked:d,onCheckedChange:k})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center gap-1",children:[e.jsx("h5",{className:"font-normal text-[#757575]",children:"Edit Profile"}),e.jsx(p.edit,{className:"w-5 h-5 cursor-pointer",onClick:v})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center gap-1",children:[e.jsx("h5",{className:"font-normal text-[#757575]",children:"Delete User"}),e.jsx(p.trash,{className:"w-5 h-5 cursor-pointer text-red-600",onClick:B})]})]}),e.jsx("div",{className:"mt-[1.5rem] w-full border-[10px] border-[#444444] rounded-lg",children:e.jsx("table",{className:"w-full table-auto",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"border-b-2 border-[#949494] p-3 px-5 text-[#959595]",children:"User ID"}),e.jsx("td",{className:"border-b-2 border-[#949494] p-3",style:t,children:r._id})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border-b-2 border-[#949494] p-3 px-5 text-[#959595]",children:"Email"}),e.jsx("td",{className:"border-b-2 border-[#949494] p-3",style:t,children:r.email})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border-b-2 border-[#949494] p-3 px-5 text-[#959595]",children:"Login Type"}),e.jsx("td",{className:"border-b-2 border-[#949494] p-3",style:t,children:r.googleId?"Google":"Email"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border-b-2 border-[#949494] p-3 px-5 text-[#959595]",children:"Balance"}),e.jsx("td",{className:"border-b-2 border-[#949494] p-3",style:t,children:f?e.jsx(F,{type:"number",value:x,onChange:D,className:"w-full p-2 border rounded-md no-arrows"}):r.balance})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border-b-2 border-[#949494] p-3 px-5 text-[#959595]",children:"Api Key"}),e.jsx("td",{className:"border-b-2 border-[#949494] p-3",style:t,children:r.api_key})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border-b-2 border-[#949494] p-3 px-5 text-[#959595]",children:"Trx Address"}),e.jsx("td",{className:"border-b-2 border-[#949494] p-3",style:t,children:r.trxAddress})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border-b-2 border-[#949494] p-3 px-5 text-[#959595]",children:"Trx Private Key"}),e.jsx("td",{className:"border-b-2 border-[#949494] p-3",style:t,children:r.trxPrivateKey})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"p-3 px-5 text-[#959595]",children:"Joined"}),e.jsx("td",{className:"p-3",style:t,children:P(r.createdAt).format("DD/MM/YYYY hh:mm:ss A")})]})]})})}),f&&e.jsxs("div",{className:"w-full flex items-center justify-center gap-4 mt-8",children:[e.jsx(b,{className:"py-1 px-8 text-xs bg-[#129BFF] text-white hover:bg-[#129BFF]",onClick:C,children:"Save"}),e.jsx(b,{className:"py-1 px-6 text-xs !rounded-md border-2 border-white font-normal hover:!bg-white hover:text-black transition-colors duration-200 ease-in-out",onClick:()=>i(!1),children:"Cancel"})]})]})})]})},$=S()(T);export{$ as default};
