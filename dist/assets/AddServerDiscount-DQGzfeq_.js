import{A as j,r as n,e as v,u as b,j as e,B as t,I as h,a as l}from"./index-DP5l2bTG.js";import{I as g}from"./Input-BHpDEKWe.js";import{L as N}from"./Label-BT8m33cQ.js";import"./index-BoyYGgaP.js";const w=()=>{const[c,o]=n.useState(""),[i,d]=n.useState([]),a=v().id,u=b(),m=()=>u("/discount/server"),x=async()=>{try{const r=await l.get("/server/get-discount");d(r.data)}catch(r){console.error("Error fetching discounts:",r)}};n.useEffect(()=>{x()},[]);const p=async r=>{r.preventDefault();try{const s=parseFloat(c);if(isNaN(s)){alert("Please enter a valid margin price.");return}await l.post("/server/add-discount",{server:a,discount:s}),o(""),x()}catch(s){console.error("Error adding server discount:",s),alert("An error occurred while updating the margin price.")}},f=async r=>{try{await l.delete(`/server/delete-discount?server=${r}`),d(i.filter(s=>s.server!==r))}catch(s){console.error("Error deleting discount:",s),alert("An error occurred while deleting the discount.")}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full my-4 flex items-center justify-between",children:e.jsxs(t,{variant:"link",onClick:m,className:"text-sm font-normal text-[#8C8C8C] !no-underline p-1 h-0 flex gap-2",children:[e.jsx(h.arrowLeft,{className:"w-4 h-4"})," Server Discount"]})}),e.jsx("div",{className:"flex items-center justify-center pt-[1rem]",children:e.jsxs("div",{className:"bg-transparent w-full max-w-md rounded-lg mb-[60px] border-none dark",children:[e.jsx("div",{className:"w-full flex flex-col",children:e.jsxs("div",{className:"flex items-center text-base",children:[e.jsx("p",{className:"text-white w-40",children:"Selected Server:"}),e.jsxs("span",{className:"text-[#959595]",children:["Server ",a]})]})}),e.jsxs("form",{onSubmit:p,className:"my-4",children:[e.jsxs("div",{children:[e.jsx(N,{htmlFor:"margin",className:"block text-base text-[#9d9d9d] font-normal py-3",children:"Margin"}),e.jsx(g,{id:"margin",type:"text",placeholder:"-1.7",className:"w-full h-12 pl-3 rounded-lg text-[#9d9d9d] !placeholder-[#9d9d9d] bg-transparent border-[#e0effe] focus:border-none",value:c,onChange:r=>o(r.target.value)})]}),e.jsxs("div",{className:"w-full flex items-center justify-center gap-4 mt-8",children:[e.jsx(t,{className:"py-1 px-8 text-xs bg-[#129BFF] text-white hover:bg-[#129BFF]",children:"Add"}),e.jsx(t,{type:"button",onClick:m,className:"py-1 px-6 text-xs !rounded-md border-2 border-white font-normal hover:!bg-white hover:text-black transition-colors duration-200 ease-in-out",children:"Cancel"})]})]}),e.jsx("hr",{className:"border-[#888888] border w-full mt-8 mb-4"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[#A5A5A5] text-sm my-3",children:"Records"}),e.jsxs("table",{className:"w-full text-center border-collapse text-sm",children:[e.jsx("thead",{className:"sticky top-0",children:e.jsxs("tr",{className:"text-[#A5A5A5] h-12 border-b border-[#373737]",children:[e.jsx("th",{className:"p-2 font-normal",children:"Server"}),e.jsx("th",{className:"p-2 font-normal",children:"Discount"}),e.jsx("th",{className:"p-2 font-normal",children:"Actions"})]})}),e.jsx("tbody",{children:i.filter(r=>r.server.toString()===a).map(r=>e.jsxs("tr",{className:"h-12 border-b border-[#373737]",children:[e.jsx("td",{className:"p-2 font-normal text-sm",children:r.server}),e.jsx("td",{className:"p-2 font-normal text-sm",children:r.discount.toFixed(2)}),e.jsx("td",{className:"p-2 font-normal text-sm",children:e.jsx(t,{onClick:()=>f(r.server),children:e.jsx(h.trash,{className:"w-4 h-4 text-red-600"})})})]},r.server))})]})]})]})})]})},D=j()(w);export{D as default};
